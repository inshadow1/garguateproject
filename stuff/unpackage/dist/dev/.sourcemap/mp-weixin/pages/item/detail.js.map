{"version":3,"file":"detail.js","sources":["pages/item/detail.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaXRlbS9kZXRhaWwudnVl"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <view class=\"item-detail\">\r\n      <view class=\"image-container\">\r\n        <image\r\n          class=\"item-image\"\r\n          :src=\"item.imageUrl || '/static/default-item.png'\"\r\n          mode=\"aspectFit\"\r\n          @dblclick=\"showFullImage\"\r\n        ></image>\r\n      </view>\r\n\r\n      <view class=\"info-section\">\r\n        <view class=\"item-header\">\r\n          <view class=\"item-name\">{{ item.name }}</view>\r\n          <view class=\"favorite-btn\" @click=\"toggleFavorite\">\r\n            <text class=\"icon\" :class=\"{ active: isFavorite }\">{{\r\n              isFavorite ? '★' : '☆'\r\n            }}</text>\r\n          </view>\r\n        </view>\r\n        <view class=\"item-category\"\r\n          >分类：{{ item.category?.name || '未知分类' }}</view\r\n        >\r\n        <view class=\"item-quantity\">\r\n          <text>数量：</text>\r\n          <view class=\"quantity-control\">\r\n            <button class=\"quantity-btn\" @click=\"updateQuantity(-1)\">-</button>\r\n            <text class=\"quantity-value\" @click=\"showQuantityPopup\">{{\r\n              item.quantity\r\n            }}</text>\r\n            <button class=\"quantity-btn\" @click=\"updateQuantity(1)\">+</button>\r\n          </view>\r\n        </view>\r\n        <view class=\"item-location\">位置：{{ item.location || '暂无' }}</view>\r\n        <view class=\"item-description\">\r\n          <view class=\"label\">描述：</view>\r\n          <view class=\"content\">{{ item.description || '暂无描述' }}</view>\r\n        </view>\r\n        <view class=\"item-time\">\r\n          <view class=\"time-item\"\r\n            >创建时间：{{ formatTime(item.createTime) }}</view\r\n          >\r\n          <view class=\"time-item\"\r\n            >更新时间：{{ formatTime(item.updateTime) }}</view\r\n          >\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"reminder-section\" v-if=\"canManageItems\">\r\n        <view class=\"section-title\">提醒设置</view>\r\n\r\n        <view class=\"reminder-item\">\r\n          <text class=\"reminder-label\">库存提醒</text>\r\n          <view class=\"reminder-content\">\r\n            <input\r\n              type=\"number\"\r\n              v-model=\"stockThreshold\"\r\n              placeholder=\"设置库存阈值\"\r\n              class=\"reminder-input\"\r\n            />\r\n            <button\r\n              class=\"reminder-btn\"\r\n              :class=\"{ active: stockReminder }\"\r\n              @click=\"toggleStockReminder\"\r\n            >\r\n              设置\r\n            </button>\r\n          </view>\r\n          <text class=\"reminder-tip\" v-if=\"stockReminder\"\r\n            >当前阈值：{{ stockThreshold }}，低于时提醒</text\r\n          >\r\n        </view>\r\n\r\n        <view class=\"reminder-item\">\r\n          <text class=\"reminder-label\">使用提醒</text>\r\n          <view class=\"reminder-content\">\r\n            <input\r\n              type=\"number\"\r\n              v-model=\"usageInterval\"\r\n              placeholder=\"设置使用间隔(天)\"\r\n              class=\"reminder-input\"\r\n            />\r\n            <button\r\n              class=\"reminder-btn\"\r\n              :class=\"{ active: usageReminder }\"\r\n              @click=\"toggleUsageReminder\"\r\n            >\r\n              设置\r\n            </button>\r\n          </view>\r\n          <text class=\"reminder-tip\" v-if=\"usageReminder\">\r\n            使用间隔：{{ usageInterval }}天\r\n            <text v-if=\"lastUsageTime\"\r\n              >，上次使用：{{ formatTime(lastUsageTime) }}</text\r\n            >\r\n          </text>\r\n        </view>\r\n\r\n        <button class=\"usage-btn\" @click=\"recordUsage\">记录使用</button>\r\n      </view>\r\n\r\n      <view class=\"action-buttons\" v-if=\"canManageItems\">\r\n        <button class=\"edit-btn\" @click=\"handleEdit\">编辑</button>\r\n        <button class=\"delete-btn\" @click=\"handleDelete\">删除</button>\r\n      </view>\r\n    </view>\r\n  </view>\r\n\r\n  <!-- 数量修改弹窗 -->\r\n  <uni-popup ref=\"quantityPopup\" type=\"dialog\">\r\n    <uni-popup-dialog\r\n      title=\"修改数量\"\r\n      :before-close=\"true\"\r\n      @close=\"closeQuantityDialog\"\r\n      @confirm=\"confirmQuantityDialog\"\r\n    >\r\n      <view class=\"popup-content\">\r\n        <input\r\n          type=\"number\"\r\n          v-model=\"tempQuantity\"\r\n          class=\"quantity-popup-input\"\r\n          placeholder=\"请输入数量\"\r\n        />\r\n      </view>\r\n    </uni-popup-dialog>\r\n  </uni-popup>\r\n\r\n  <!-- 全屏图片弹窗 -->\r\n  <uni-popup ref=\"imagePopup\" type=\"center\">\r\n    <view class=\"fullscreen-image-container\">\r\n      <image\r\n        class=\"fullscreen-image\"\r\n        :src=\"item.imageUrl || '/static/default-item.png'\"\r\n        mode=\"widthFix\"\r\n        @click=\"closeFullImage\"\r\n      ></image>\r\n      <view class=\"close-btn\" @click=\"closeFullImage\">×</view>\r\n    </view>\r\n  </uni-popup>\r\n</template>\r\n\r\n<script>\r\nimport { reminderApi } from '@/api/reminder'\r\nimport { favoriteApi } from '@/api/favorite'\r\nimport { itemApi } from '@/api/item'\r\nimport { userApi } from '@/api/user'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      item: {},\r\n      itemId: '',\r\n      stockThreshold: '',\r\n      usageInterval: '',\r\n      stockReminder: false,\r\n      usageReminder: false,\r\n      lastUsageTime: null,\r\n      reminders: [],\r\n      isFavorite: false,\r\n      _originalQuantity: null,\r\n      tempQuantity: '',\r\n      userRole: '',\r\n      familyRoles: [],\r\n    }\r\n  },\r\n  computed: {\r\n    canManageItems() {\r\n      // 如果有家庭角色，则检查家庭角色权限\r\n      if (this.familyRoles && this.familyRoles.length > 0) {\r\n        return this.familyRoles.some(\r\n          (role) => role.role === 'ADMIN' || role.role === 'MEMBER'\r\n        )\r\n      }\r\n      // 如果没有家庭角色，则使用全局角色\r\n      return this.userRole === 'ADMIN' || this.userRole === 'MEMBER'\r\n    },\r\n  },\r\n  onLoad(options) {\r\n    if (options.id) {\r\n      this.itemId = options.id\r\n      this.loadUserRole()\r\n      this.loadItemDetail(options.id)\r\n      this.loadReminders()\r\n      this.checkFavorite()\r\n    }\r\n  },\r\n  onShow() {\r\n    if (this.itemId) {\r\n      this.loadItemDetail(this.itemId)\r\n    }\r\n  },\r\n  methods: {\r\n    async loadUserRole() {\r\n      try {\r\n        const userId = uni.getStorageSync('userId')\r\n        const res = await userApi.getProfile(userId)\r\n        this.userRole = res.profile.role\r\n        this.familyRoles = res.profile.familyRoles || []\r\n      } catch (e) {\r\n        console.error('获取用户角色失败:', e)\r\n      }\r\n    },\r\n    async loadItemDetail(itemId) {\r\n      const userId = uni.getStorageSync('userId')\r\n      try {\r\n        const res = await uni.request({\r\n          url: `http://localhost:8080/api/item/detail/${itemId}?userId=${userId}`,\r\n          method: 'GET',\r\n        })\r\n\r\n        if (res.data && res.data.success) {\r\n          this.item = res.data.item\r\n          this._originalQuantity = this.item.quantity\r\n          this.stockReminder = res.data.stockReminderEnabled\r\n          this.usageReminder = res.data.usageReminderEnabled\r\n          this.stockThreshold = res.data.stockThreshold\r\n          this.usageInterval = res.data.usageInterval\r\n          this.lastUsageTime = res.data.lastUsageTime\r\n        } else {\r\n          uni.showToast({\r\n            title: res.data.message || '获取物品详情失败',\r\n            icon: 'none',\r\n          })\r\n        }\r\n      } catch (e) {\r\n        uni.showToast({\r\n          title: '网络请求失败',\r\n          icon: 'none',\r\n        })\r\n      }\r\n    },\r\n\r\n    formatTime(timeStr) {\r\n      if (!timeStr) return '暂无'\r\n      const date = new Date(timeStr)\r\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(\r\n        2,\r\n        '0'\r\n      )}-${String(date.getDate()).padStart(2, '0')} ${String(\r\n        date.getHours()\r\n      ).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`\r\n    },\r\n\r\n    handleEdit() {\r\n      uni.navigateTo({\r\n        url: `/pages/item/item?id=${this.item.id}`,\r\n      })\r\n    },\r\n\r\n    async handleDelete() {\r\n      const userId = uni.getStorageSync('userId')\r\n      uni.showModal({\r\n        title: '提示',\r\n        content: '确定要删除该物品吗？',\r\n        success: async (res) => {\r\n          if (res.confirm) {\r\n            try {\r\n              const res = await uni.request({\r\n                url: `http://localhost:8080/api/item/delete/${this.item.id}?userId=${userId}`,\r\n                method: 'DELETE',\r\n              })\r\n\r\n              if (res.data && res.data.success) {\r\n                uni.showToast({\r\n                  title: '删除成功',\r\n                  icon: 'success',\r\n                })\r\n                setTimeout(() => {\r\n                  uni.navigateBack()\r\n                }, 1500)\r\n              } else {\r\n                uni.showToast({\r\n                  title: res.data.message || '删除失败',\r\n                  icon: 'none',\r\n                })\r\n              }\r\n            } catch (e) {\r\n              uni.showToast({\r\n                title: '网络请求失败',\r\n                icon: 'none',\r\n              })\r\n            }\r\n          }\r\n        },\r\n      })\r\n    },\r\n\r\n    async loadReminders() {\r\n      try {\r\n        const userId = uni.getStorageSync('userId')\r\n        const res = await reminderApi.getList(userId)\r\n        this.reminders = res.reminders || []\r\n\r\n        // 找到当前物品的提醒\r\n        this.reminders.forEach((reminder) => {\r\n          if (reminder.itemId === this.itemId) {\r\n            if (reminder.type === 'STOCK') {\r\n              this.stockReminder = reminder.enabled\r\n              this.stockThreshold = reminder.threshold\r\n            } else if (reminder.type === 'USAGE') {\r\n              this.usageReminder = reminder.enabled\r\n              this.usageInterval = reminder.interval\r\n            }\r\n          }\r\n        })\r\n      } catch (e) {\r\n        uni.showToast({\r\n          title: '获取提醒设置失败',\r\n          icon: 'none',\r\n        })\r\n      }\r\n    },\r\n\r\n    async toggleStockReminder() {\r\n      const userId = uni.getStorageSync('userId')\r\n\r\n      try {\r\n        if (!this.stockThreshold) {\r\n          uni.showToast({\r\n            title: '请设置库存阈值',\r\n            icon: 'none',\r\n          })\r\n          return\r\n        }\r\n\r\n        await reminderApi.createStockReminder({\r\n          itemId: this.itemId,\r\n          threshold: Number(this.stockThreshold),\r\n          userId,\r\n          enabled: !this.stockReminder,\r\n        })\r\n\r\n        this.stockReminder = !this.stockReminder\r\n        uni.showToast({\r\n          title: this.stockReminder ? '已开启库存提醒' : '已关闭库存提醒',\r\n          icon: 'success',\r\n        })\r\n      } catch (e) {\r\n        uni.showToast({\r\n          title: e.message || '设置失败',\r\n          icon: 'none',\r\n        })\r\n      }\r\n    },\r\n\r\n    async toggleUsageReminder() {\r\n      const userId = uni.getStorageSync('userId')\r\n\r\n      try {\r\n        if (!this.usageInterval) {\r\n          uni.showToast({\r\n            title: '请设置使用间隔',\r\n            icon: 'none',\r\n          })\r\n          return\r\n        }\r\n\r\n        await reminderApi.createUsageReminder({\r\n          itemId: this.itemId,\r\n          interval: Number(this.usageInterval),\r\n          userId,\r\n          enabled: !this.usageReminder,\r\n        })\r\n\r\n        this.usageReminder = !this.usageReminder\r\n        uni.showToast({\r\n          title: this.usageReminder ? '已开启使用提醒' : '已关闭使用提醒',\r\n          icon: 'success',\r\n        })\r\n      } catch (e) {\r\n        uni.showToast({\r\n          title: e.message || '设置失败',\r\n          icon: 'none',\r\n        })\r\n      }\r\n    },\r\n\r\n    async recordUsage() {\r\n      try {\r\n        const userId = uni.getStorageSync('userId')\r\n        await reminderApi.updateLastUsage(this.itemId, userId)\r\n        this.lastUsageTime = new Date().toISOString()\r\n        uni.showToast({\r\n          title: '记录成功',\r\n          icon: 'success',\r\n        })\r\n      } catch (e) {\r\n        uni.showToast({\r\n          title: '记录失败',\r\n          icon: 'none',\r\n        })\r\n      }\r\n    },\r\n\r\n    async checkFavorite() {\r\n      try {\r\n        const userId = uni.getStorageSync('userId')\r\n        const res = await favoriteApi.check(this.itemId, userId)\r\n        this.isFavorite = res.isFavorite\r\n      } catch (e) {\r\n        console.error('检查收藏状态失败:', e)\r\n      }\r\n    },\r\n\r\n    async toggleFavorite() {\r\n      try {\r\n        const userId = uni.getStorageSync('userId')\r\n        if (this.isFavorite) {\r\n          await favoriteApi.remove(this.itemId, userId)\r\n          uni.showToast({\r\n            title: '已取消收藏',\r\n            icon: 'success',\r\n          })\r\n        } else {\r\n          await favoriteApi.add({\r\n            itemId: this.itemId,\r\n            userId,\r\n          })\r\n          uni.showToast({\r\n            title: '收藏成功',\r\n            icon: 'success',\r\n          })\r\n        }\r\n        this.isFavorite = !this.isFavorite\r\n      } catch (e) {\r\n        uni.showToast({\r\n          title: e.message || '操作失败',\r\n          icon: 'none',\r\n        })\r\n      }\r\n    },\r\n\r\n    async updateQuantity(change) {\r\n      const newQuantity = this.item.quantity + change\r\n      if (newQuantity < 0) {\r\n        uni.showToast({\r\n          title: '数量不能为负',\r\n          icon: 'none',\r\n        })\r\n        return\r\n      }\r\n\r\n      try {\r\n        const userId = uni.getStorageSync('userId')\r\n        await itemApi.updateQuantity(this.item.id, {\r\n          amount: change,\r\n          userId,\r\n        })\r\n\r\n        this.item.quantity = newQuantity\r\n        uni.showToast({\r\n          title: change > 0 ? '增加成功' : '减少成功',\r\n          icon: 'success',\r\n        })\r\n      } catch (e) {\r\n        uni.showToast({\r\n          title: e.message || '操作失败',\r\n          icon: 'none',\r\n        })\r\n      }\r\n    },\r\n\r\n    showQuantityPopup() {\r\n      this.tempQuantity = String(this.item.quantity)\r\n      this.$refs.quantityPopup.open()\r\n    },\r\n\r\n    closeQuantityDialog() {\r\n      this.$refs.quantityPopup.close()\r\n    },\r\n\r\n    async confirmQuantityDialog() {\r\n      const newQuantity = parseInt(this.tempQuantity)\r\n      if (isNaN(newQuantity) || newQuantity < 0) {\r\n        uni.showToast({\r\n          title: '请输入有效数量',\r\n          icon: 'none',\r\n        })\r\n        return\r\n      }\r\n\r\n      try {\r\n        const userId = uni.getStorageSync('userId')\r\n        const change = newQuantity - this.item.quantity\r\n        await itemApi.updateQuantity(this.item.id, {\r\n          amount: change,\r\n          userId,\r\n        })\r\n\r\n        this.item.quantity = newQuantity\r\n        this.$refs.quantityPopup.close()\r\n        uni.showToast({\r\n          title: '更新成功',\r\n          icon: 'success',\r\n        })\r\n      } catch (e) {\r\n        uni.showToast({\r\n          title: e.message || '更新失败',\r\n          icon: 'none',\r\n        })\r\n      }\r\n    },\r\n\r\n    // 显示全屏图片\r\n    showFullImage() {\r\n      // 检查图片是否存在\r\n      if (!this.item.imageUrl) {\r\n        uni.showToast({\r\n          title: '暂无图片',\r\n          icon: 'none',\r\n        })\r\n        return\r\n      }\r\n\r\n      // 预览图片前先预加载\r\n      uni.showLoading({\r\n        title: '加载中...',\r\n      })\r\n\r\n      const img = new Image()\r\n      img.src = this.item.imageUrl\r\n\r\n      img.onload = () => {\r\n        uni.hideLoading()\r\n        this.$refs.imagePopup.open()\r\n      }\r\n\r\n      img.onerror = () => {\r\n        uni.hideLoading()\r\n        uni.showToast({\r\n          title: '图片加载失败',\r\n          icon: 'none',\r\n        })\r\n      }\r\n    },\r\n\r\n    // 关闭全屏图片\r\n    closeFullImage() {\r\n      // 添加渐隐动画效果\r\n      const container = this.$refs.imagePopup.$el.querySelector(\r\n        '.fullscreen-image-container'\r\n      )\r\n      container.style.transition = 'opacity 0.3s ease'\r\n      container.style.opacity = '0'\r\n\r\n      // 等待动画完成后关闭弹窗\r\n      setTimeout(() => {\r\n        this.$refs.imagePopup.close()\r\n        // 重置透明度,为下次打开做准备\r\n        container.style.opacity = '1'\r\n      }, 300)\r\n\r\n      // 移除可能的全局事件监听器\r\n      document.removeEventListener('keydown', this.handleKeyPress)\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n.container {\r\n  padding: 20rpx;\r\n}\r\n\r\n.item-detail {\r\n  background-color: #fff;\r\n  border-radius: 16rpx;\r\n  overflow: hidden;\r\n}\r\n\r\n.image-container {\r\n  width: 100%;\r\n  height: 400rpx;\r\n  background-color: #f5f5f5;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.item-image {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.info-section {\r\n  padding: 30rpx;\r\n}\r\n\r\n.item-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.item-name {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.item-category,\r\n.item-quantity,\r\n.item-location {\r\n  font-size: 28rpx;\r\n  color: #666;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.item-description {\r\n  margin-top: 30rpx;\r\n}\r\n\r\n.item-description .label {\r\n  font-size: 28rpx;\r\n  color: #666;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.item-description .content {\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  line-height: 1.5;\r\n}\r\n\r\n.action-buttons {\r\n  padding: 30rpx;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.edit-btn,\r\n.delete-btn {\r\n  flex: 1;\r\n  margin: 0 10rpx;\r\n}\r\n\r\n.edit-btn {\r\n  background-color: #007aff;\r\n  color: #fff;\r\n}\r\n\r\n.delete-btn {\r\n  background-color: #ff4d4f;\r\n  color: #fff;\r\n}\r\n\r\n.item-time {\r\n  margin-top: 20rpx;\r\n  padding-top: 20rpx;\r\n  border-top: 1rpx solid #eee;\r\n}\r\n\r\n.time-item {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.reminder-section {\r\n  margin-top: 30rpx;\r\n  padding: 30rpx;\r\n  border-top: 1rpx solid #eee;\r\n}\r\n\r\n.section-title {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.reminder-item {\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.reminder-label {\r\n  font-size: 28rpx;\r\n  color: #666;\r\n  margin-bottom: 10rpx;\r\n  display: block;\r\n}\r\n\r\n.reminder-content {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.reminder-input {\r\n  flex: 1;\r\n  height: 70rpx;\r\n  border: 1rpx solid #eee;\r\n  border-radius: 8rpx;\r\n  padding: 0 20rpx;\r\n  margin-right: 20rpx;\r\n}\r\n\r\n.reminder-btn {\r\n  width: 160rpx;\r\n  height: 70rpx;\r\n  line-height: 70rpx;\r\n  text-align: center;\r\n  border: 1rpx solid #007aff;\r\n  color: #007aff;\r\n  border-radius: 8rpx;\r\n  font-size: 28rpx;\r\n  background: #fff;\r\n}\r\n\r\n.reminder-btn.active {\r\n  background: #007aff;\r\n  color: #fff;\r\n}\r\n\r\n.usage-btn {\r\n  width: 100%;\r\n  height: 80rpx;\r\n  line-height: 80rpx;\r\n  text-align: center;\r\n  background: #4cd964;\r\n  color: #fff;\r\n  border-radius: 8rpx;\r\n  margin-top: 30rpx;\r\n}\r\n\r\n.favorite-btn {\r\n  padding: 20rpx;\r\n}\r\n\r\n.favorite-btn .icon {\r\n  font-size: 48rpx;\r\n  color: #999;\r\n}\r\n\r\n.favorite-btn .icon.active {\r\n  color: #ff6b6b;\r\n}\r\n\r\n.reminder-tip {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  margin-top: 10rpx;\r\n}\r\n\r\n.item-quantity {\r\n  font-size: 28rpx;\r\n  color: #666;\r\n  margin-bottom: 16rpx;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.quantity-control {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-left: 20rpx;\r\n}\r\n\r\n.quantity-btn {\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  line-height: 60rpx;\r\n  text-align: center;\r\n  background: #f5f5f5;\r\n  border-radius: 8rpx;\r\n  font-size: 32rpx;\r\n  color: #333;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.quantity-value {\r\n  margin: 0 30rpx;\r\n  font-size: 32rpx;\r\n  color: #333;\r\n  min-width: 60rpx;\r\n  text-align: center;\r\n  padding: 10rpx 20rpx;\r\n  background-color: #f8f8f8;\r\n  border-radius: 8rpx;\r\n}\r\n\r\n.quantity-popup-input {\r\n  width: 100%;\r\n  height: 80rpx;\r\n  border: 1rpx solid #eee;\r\n  border-radius: 8rpx;\r\n  padding: 0 20rpx;\r\n  text-align: center;\r\n  margin: 20rpx 0;\r\n}\r\n\r\n.quantity-btn:active {\r\n  background: #e0e0e0;\r\n}\r\n\r\n.fullscreen-image-container {\r\n  position: relative;\r\n  width: 90vw;\r\n  max-height: 90vh;\r\n  overflow: hidden;\r\n  background-color: rgba(0, 0, 0, 0.8);\r\n  border-radius: 12rpx;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.fullscreen-image {\r\n  width: 100%;\r\n  height: auto;\r\n  display: block;\r\n}\r\n\r\n.close-btn {\r\n  position: absolute;\r\n  top: 20rpx;\r\n  right: 20rpx;\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  line-height: 60rpx;\r\n  text-align: center;\r\n  color: #fff;\r\n  font-size: 48rpx;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  border-radius: 50%;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'C:/Users/Administrator/Desktop/论文/project/garguateproject/stuff/pages/item/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","userApi","res","reminderApi","favoriteApi","itemApi"],"mappings":"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"}