{"version":3,"file":"category.js","sources":["pages/category/category.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2F0ZWdvcnkvY2F0ZWdvcnkudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"header\">\r\n\t\t\t<button class=\"add-btn\" @click=\"showAddModal\">添加分类</button>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"category-list\">\r\n\t\t\t<view v-if=\"categories.length === 0\" class=\"empty-tip\">\r\n\t\t\t\t<text>暂无分类数据</text>\r\n\t\t\t</view>\r\n\t\t\t<view v-else v-for=\"(item, index) in categories\" :key=\"item.id\" class=\"category-item\">\r\n\t\t\t\t<view class=\"category-content\">\r\n\t\t\t\t\t<view class=\"category-name\">{{item.name}}</view>\r\n\t\t\t\t\t<view class=\"category-desc\">{{item.description || '暂无描述'}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"category-actions\">\r\n\t\t\t\t\t<text class=\"edit-btn\" @click=\"handleEdit(item)\">编辑</text>\r\n\t\t\t\t\t<text class=\"delete-btn\" @click=\"handleDelete(item.id)\">删除</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 添加/编辑弹窗 -->\r\n\t\t<uni-popup ref=\"popup\" type=\"dialog\">\r\n\t\t\t<uni-popup-dialog \r\n\t\t\t\t:title=\"isEdit ? '编辑分类' : '添加分类'\"\r\n\t\t\t\t:before-close=\"true\"\r\n\t\t\t\t@close=\"closeDialog\"\r\n\t\t\t\t@confirm=\"confirmDialog\">\r\n\t\t\t\t<view class=\"popup-content\">\r\n\t\t\t\t\t<input \r\n\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\tv-model=\"formData.name\" \r\n\t\t\t\t\t\tplaceholder=\"请输入分类名称\"\r\n\t\t\t\t\t\tclass=\"input-field\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input \r\n\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\tv-model=\"formData.description\" \r\n\t\t\t\t\t\tplaceholder=\"请输入分类描述\"\r\n\t\t\t\t\t\tclass=\"input-field\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-popup-dialog>\r\n\t\t</uni-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcategories: [],\r\n\t\t\tformData: {\r\n\t\t\t\tname: '',\r\n\t\t\t\tdescription: '',\r\n\t\t\t\tuserId: ''\r\n\t\t\t},\r\n\t\t\tisEdit: false,\r\n\t\t\tcurrentCategoryId: null\r\n\t\t}\r\n\t},\r\n\tonShow() {\r\n\t\tthis.loadCategories()\r\n\t},\r\n\tmethods: {\r\n\t\tasync loadCategories() {\r\n\t\t\tconst userId = uni.getStorageSync('userId')\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await uni.request({\r\n\t\t\t\t\turl: `http://localhost:8080/api/category/list/${userId}`,\r\n\t\t\t\t\tmethod: 'GET'\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif (res.data && res.data.success) {\r\n\t\t\t\t\tthis.categories = res.data.categories || []\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '获取分类列表失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '网络请求失败',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tshowAddModal() {\r\n\t\t\tthis.isEdit = false\r\n\t\t\tthis.formData = {\r\n\t\t\t\tname: '',\r\n\t\t\t\tdescription: '',\r\n\t\t\t\tuserId: uni.getStorageSync('userId')\r\n\t\t\t}\r\n\t\t\tthis.$refs.popup.open()\r\n\t\t},\r\n\t\t\r\n\t\thandleEdit(item) {\r\n\t\t\tthis.isEdit = true\r\n\t\t\tthis.currentCategoryId = item.id\r\n\t\t\tthis.formData = {\r\n\t\t\t\tname: item.name,\r\n\t\t\t\tdescription: item.description || '',\r\n\t\t\t\tuserId: uni.getStorageSync('userId')\r\n\t\t\t}\r\n\t\t\tthis.$refs.popup.open()\r\n\t\t},\r\n\t\t\r\n\t\tasync handleDelete(categoryId) {\r\n\t\t\tconst userId = uni.getStorageSync('userId')\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '确定要删除该分类吗？',\r\n\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tconst res = await uni.request({\r\n\t\t\t\t\t\t\t\turl: `http://localhost:8080/api/category/delete/${categoryId}?userId=${userId}`,\r\n\t\t\t\t\t\t\t\tmethod: 'DELETE'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (res.data && res.data.success) {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '删除成功',\r\n\t\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthis.loadCategories()\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: res.data.message || '删除失败',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '网络请求失败',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t\r\n\t\tcloseDialog() {\r\n\t\t\tthis.$refs.popup.close()\r\n\t\t},\r\n\t\t\r\n\t\tasync confirmDialog() {\r\n\t\t\tif (!this.formData.name) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入分类名称',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tlet res\r\n\t\t\t\tif (this.isEdit) {\r\n\t\t\t\t\tres = await uni.request({\r\n\t\t\t\t\t\turl: `http://localhost:8080/api/category/update/${this.currentCategoryId}`,\r\n\t\t\t\t\t\tmethod: 'PUT',\r\n\t\t\t\t\t\tdata: this.formData\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tres = await uni.request({\r\n\t\t\t\t\t\turl: 'http://localhost:8080/api/category/create',\r\n\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\tdata: this.formData\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (res.data && res.data.success) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: this.isEdit ? '更新成功' : '添加成功',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.$refs.popup.close()\r\n\t\t\t\t\tthis.loadCategories()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: res.data.message || (this.isEdit ? '更新失败' : '添加失败'),\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '网络请求失败',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n.container {\r\n\tpadding: 20rpx;\r\n}\r\n\r\n.header {\r\n\tmargin-bottom: 20rpx;\r\n}\r\n\r\n.add-btn {\r\n\tbackground-color: #007AFF;\r\n\tcolor: #fff;\r\n}\r\n\r\n.category-list {\r\n\tbackground-color: #fff;\r\n\tborder-radius: 16rpx;\r\n}\r\n\r\n.empty-tip {\r\n\ttext-align: center;\r\n\tpadding: 40rpx;\r\n\tcolor: #999;\r\n}\r\n\r\n.category-item {\r\n\tpadding: 30rpx;\r\n\tborder-bottom: 1rpx solid #eee;\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n}\r\n\r\n.category-item:last-child {\r\n\tborder-bottom: none;\r\n}\r\n\r\n.category-content {\r\n\tflex: 1;\r\n}\r\n\r\n.category-name {\r\n\tfont-size: 32rpx;\r\n\tmargin-bottom: 10rpx;\r\n}\r\n\r\n.category-desc {\r\n\tfont-size: 24rpx;\r\n\tcolor: #666;\r\n}\r\n\r\n.category-actions {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n}\r\n\r\n.edit-btn, .delete-btn {\r\n\tpadding: 10rpx 20rpx;\r\n\tfont-size: 28rpx;\r\n\tmargin-left: 20rpx;\r\n}\r\n\r\n.edit-btn {\r\n\tcolor: #007AFF;\r\n}\r\n\r\n.delete-btn {\r\n\tcolor: #ff4d4f;\r\n}\r\n\r\n.popup-content {\r\n\tpadding: 20rpx;\r\n}\r\n\r\n.input-field {\r\n\twidth: 100%;\r\n\theight: 80rpx;\r\n\tborder: 1rpx solid #eee;\r\n\tborder-radius: 8rpx;\r\n\tmargin-bottom: 20rpx;\r\n\tpadding: 0 20rpx;\r\n\tbox-sizing: border-box;\r\n}\r\n</style> ","import MiniProgramPage from 'C:/Users/Administrator/Desktop/论文/project/garguateproject/stuff/pages/category/category.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","res"],"mappings":"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"}