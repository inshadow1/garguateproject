{"version":3,"file":"index.js","sources":["pages/index/index.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"login-box\">\r\n\t\t\t<view class=\"title\">\t\t\t<image src=\"../../static/logo.png\" style=\"width: 240rpx;height: 240rpx;\" mode=\"\"></image></view>\r\n\t\t\t<view class=\"title\">家庭物品收纳管理系统</view>\r\n\t\t\t<view class=\"title\">{{ isLogin ? '登录' : '注册' }}</view>\r\n\t\t\t\r\n\t\t\t<view class=\"input-group\">\r\n\t\t\t\t<input type=\"text\" v-model=\"username\" placeholder=\"请输入用户名\" />\r\n\t\t\t\t<input type=\"password\" v-model=\"password\" placeholder=\"请输入密码\" />\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<button class=\"submit-btn\" @click=\"handleSubmit\">{{ isLogin ? '登录' : '注册' }}</button>\r\n\t\t\t\r\n\t\t\t<view class=\"switch-type\" @click=\"switchLoginType\">\r\n\t\t\t\t{{ isLogin ? '没有账号？去注册' : '已有账号？去登录' }}\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport { userApi } from '@/api/user'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tisLogin: true,\r\n\t\t\tusername: '',\r\n\t\t\tpassword: '',\r\n\t\t\tformData: {\r\n\t\t\t\tusername: '',\r\n\t\t\t\tpassword: ''\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tswitchLoginType() {\r\n\t\t\tthis.isLogin = !this.isLogin\r\n\t\t},\r\n\t\tvalidatePassword(password) {\r\n\t\t\tif (password.length < 12) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '密码长度至少12位',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\t},\r\n\t\tasync handleSubmit() {\r\n\t\t\tif (!this.username || !this.password) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入用户名和密码',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 登录和注册都校验密码长度\r\n\t\t\tif (!this.validatePassword(this.password)) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.formData.username = this.username\r\n\t\t\tthis.formData.password = this.password\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tlet res\r\n\t\t\t\tif (this.isLogin) {\r\n\t\t\t\t\tres = await userApi.login(this.formData)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tres = await userApi.register(this.formData)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '注册成功，请登录',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.isLogin = true\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tuni.setStorageSync('token', res.token || '')\r\n\t\t\t\tuni.setStorageSync('userId', res.userId)\r\n\t\t\t\tuni.setStorageSync('username', this.username)\r\n\t\t\t\t\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl: '/pages/home/home'\r\n\t\t\t\t})\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e)\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: this.isLogin ? '账号或密码错误' : '注册失败，请重试',\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\tduration: 2000\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n.container {\r\n\tpadding: 20px;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tmin-height: 100vh;\r\n\tbox-sizing: border-box;\r\n}\r\n\r\n.login-box {\r\n\twidth: 90%;\r\n\tmax-width: 600rpx;\r\n\tpadding: 40rpx;\r\n\tborder-radius: 16rpx;\r\n\tbackground-color: #fff;\r\n\tbox-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.title {\r\n\tfont-size: 24px;\r\n\ttext-align: center;\r\n\tmargin-bottom: 30px;\r\n}\r\n\r\n.input-group {\r\n\tmargin-bottom: 20px;\r\n}\r\n\r\n.input-group input {\r\n\twidth: 100%;\r\n\theight: 80rpx;\r\n\tmargin-bottom: 30rpx;\r\n\tpadding: 0 30rpx;\r\n\tborder: 1px solid #ddd;\r\n\tborder-radius: 8rpx;\r\n\tbox-sizing: border-box;\r\n}\r\n\r\n.submit-btn {\r\n\twidth: 100%;\r\n\theight: 40px;\r\n\tline-height: 40px;\r\n\ttext-align: center;\r\n\tbackground-color: #007AFF;\r\n\tcolor: #fff;\r\n\tborder-radius: 4px;\r\n\tmargin-bottom: 15px;\r\n}\r\n\r\n.switch-type {\r\n\ttext-align: center;\r\n\tcolor: #007AFF;\r\n\tfont-size: 14px;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'C:/Users/Administrator/Desktop/论文/project/garguateproject/stuff/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","userApi"],"mappings":";;;;AAwBA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,SAAS;AAAA,MACT,UAAU;AAAA,MACV,UAAU;AAAA,MACV,UAAU;AAAA,QACT,UAAU;AAAA,QACV,UAAU;AAAA,MACX;AAAA,IACD;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,kBAAkB;AACjB,WAAK,UAAU,CAAC,KAAK;AAAA,IACrB;AAAA,IACD,iBAAiB,UAAU;AAC1B,UAAI,SAAS,SAAS,IAAI;AACzBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AACD,eAAO;AAAA,MACR;AACA,aAAO;AAAA,IACP;AAAA,IACD,MAAM,eAAe;AACpB,UAAI,CAAC,KAAK,YAAY,CAAC,KAAK,UAAU;AACrCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AACD;AAAA,MACD;AAGA,UAAI,CAAC,KAAK,iBAAiB,KAAK,QAAQ,GAAG;AAC1C;AAAA,MACD;AAEA,WAAK,SAAS,WAAW,KAAK;AAC9B,WAAK,SAAS,WAAW,KAAK;AAE9B,UAAI;AACH,YAAI;AACJ,YAAI,KAAK,SAAS;AACjB,gBAAM,MAAMC,SAAO,QAAC,MAAM,KAAK,QAAQ;AAAA,eACjC;AACN,gBAAM,MAAMA,SAAO,QAAC,SAAS,KAAK,QAAQ;AAC1CD,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,WACN;AACD,eAAK,UAAU;AACf;AAAA,QACD;AAEAA,sBAAAA,MAAI,eAAe,SAAS,IAAI,SAAS,EAAE;AAC3CA,sBAAAA,MAAI,eAAe,UAAU,IAAI,MAAM;AACvCA,sBAAAA,MAAI,eAAe,YAAY,KAAK,QAAQ;AAE5CA,sBAAAA,MAAI,UAAU;AAAA,UACb,KAAK;AAAA,SACL;AAAA,MACF,SAAS,GAAG;AACXA,sBAAAA,MAAc,MAAA,SAAA,+BAAA,CAAC;AACfA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO,KAAK,UAAU,YAAY;AAAA,UAClC,MAAM;AAAA,UACN,UAAU;AAAA,SACV;AAAA,MACF;AAAA,IACD;AAAA,EACD;AACD;;;;;;;;;;;;;;;;ACjGA,GAAG,WAAW,eAAe;"}