{"version":3,"file":"config.js","sources":["api/config.js"],"sourcesContent":["// API 配置文件\r\nexport const BASE_URL = process.env.NODE_ENV === 'development' \r\n    ? 'http://localhost:8080/api'\r\n    : 'https://your-production-domain.com/api'\r\n\r\n// 统一处理请求\r\nexport const request = async (options) => {\r\n    const token = uni.getStorageSync('token')\r\n    const userId = uni.getStorageSync('userId')\r\n    \r\n    try {\r\n        // 处理请求参数，将null转换为空字符串\r\n        if (options.data) {\r\n            Object.keys(options.data).forEach(key => {\r\n                if (options.data[key] === null) {\r\n                    options.data[key] = ''\r\n                }\r\n            })\r\n        }\r\n\r\n        const res = await uni.request({\r\n            url: BASE_URL + options.url,\r\n            method: options.method || 'GET',\r\n            data: options.data,\r\n            header: {\r\n                'Authorization': token,\r\n                'Content-Type': 'application/json',\r\n                ...options.header\r\n            }\r\n        })\r\n        \r\n        if (res.statusCode === 200 && res.data && res.data.success) {\r\n            return res.data\r\n        } else {\r\n            throw new Error(res.data?.message || '请求失败')\r\n        }\r\n    } catch (e) {\r\n        uni.showToast({\r\n            title: e.message || '网络请求失败',\r\n            icon: 'none'\r\n        })\r\n        throw e\r\n    }\r\n} "],"names":["uni"],"mappings":";;AACa,MAAA,WACP;AAIO,MAAA,UAAU,OAAO,YAAY;;AAChC,QAAA,QAAQA,cAAAA,MAAI,eAAe,OAAO;AACzBA,gBAAI,MAAA,eAAe,QAAQ;AAEtC,MAAA;AAEA,QAAI,QAAQ,MAAM;AACd,aAAO,KAAK,QAAQ,IAAI,EAAE,QAAQ,CAAO,QAAA;AACrC,YAAI,QAAQ,KAAK,GAAG,MAAM,MAAM;AACpB,kBAAA,KAAK,GAAG,IAAI;AAAA,QACxB;AAAA,MAAA,CACH;AAAA,IACL;AAEM,UAAA,MAAM,MAAMA,cAAA,MAAI,QAAQ;AAAA,MAC1B,KAAK,WAAW,QAAQ;AAAA,MACxB,QAAQ,QAAQ,UAAU;AAAA,MAC1B,MAAM,QAAQ;AAAA,MACd,QAAQ;AAAA,QACJ,iBAAiB;AAAA,QACjB,gBAAgB;AAAA,QAChB,GAAG,QAAQ;AAAA,MACf;AAAA,IAAA,CACH;AAED,QAAI,IAAI,eAAe,OAAO,IAAI,QAAQ,IAAI,KAAK,SAAS;AACxD,aAAO,IAAI;AAAA,IAAA,OACR;AACH,YAAM,IAAI,QAAM,SAAI,SAAJ,mBAAU,YAAW,MAAM;AAAA,IAC/C;AAAA,WACK,GAAG;AACRA,kBAAAA,MAAI,UAAU;AAAA,MACV,OAAO,EAAE,WAAW;AAAA,MACpB,MAAM;AAAA,IAAA,CACT;AACK,UAAA;AAAA,EACV;AACJ;;;"}